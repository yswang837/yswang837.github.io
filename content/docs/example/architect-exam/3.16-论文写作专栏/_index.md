---
weight: 16
title: 3.16 论文写作专栏
---
## 目录

&emsp;&emsp;本章内容无疑是各大考生最头疼的部分，占比75分，非常重要。注意摘要字数在400字以内，可分条叙述，不允许有图表；正文字数为2000到3000字。

### 题目：NoSOL 数据库技术及其应用

&emsp;&emsp;随着互联网web2.0网站的兴起，传统关系数据库在应对web2.0网站，特别是超大规模和高并发的web2.0纯动态SNS网站上已经显得力不从心，暴露了很多难以克服的问题,而非关系型的数据库则由于其本身的特点得到了非常迅速的发展。

&emsp;&emsp;NoSQL(Not only SQL)的产生就是为了解决大规模数据集合及多种数据类型带来的挑战，尤其是大数据应用难题。目前NoSOL数据库并没有一个统一的架构，根据其所采用的数据模型可以分为4类:键值(Key-Value)存储数据库、列存储数据库、文档型数据库和图(Graph)数据库。

&emsp;&emsp;请围绕"NoSOL 数据库技术及其应用”论题，依次从以下三个方面进行论述

&emsp;&emsp;1.概要叙述你参与管理和开发的软件项目以及你在其中所担任的主要工作。

&emsp;&emsp;2.详细论述常见的 NoSOL 数据库技术及其所包含的主要内容，并说明 NoSOL 数据库的主要适用场景。

&emsp;&emsp;3.结合你具体参与管理和开发的实际项目，说明具体采用哪种NOSOL数据库技术，并说明架构设计过程及其应用效果。

---
---

- 摘要

&emsp;&emsp;我所在的国内某头部互联网公司，于2019年9月决定搭建一套全新的移动设备指纹分析处理平台项目，该项目的建设目标是为集团提供高效、可靠的移动设备指纹分析、存储以及唯一标识移动设备能力，为公司各业务线的安全做好重要的底层支撑；我荣幸地担任本次系统开发的架构师，主要负责整个系统的架构设计、对项目的技术活动进行指导和协调。经调研发现，目标系统需要支持海量数据的读写，并在峰值QPS达到7万的高并发场景下保持高度的可用性，所以选择了非关系型数据库与关系型数据库相互融合的技术作为该项目在存储上的解决方案。本文着重介绍了常见的NoSql技术及其使用场景，同时详细探讨了在移动设备指纹分析处理平台项目中如何实际应用和部署非关系数据库。实践证明：恰当地使用NoSql数据库，使得系统的开发取得了成功，目前系统已稳定运行1年多，赢得了亿级用户的一致好评。

- 正文

&emsp;&emsp;随着移动互联网技术的迅猛发展，包括手机、平板在内的移动设备已经成为人们生活中不可或缺的一部分，为我们带来了更便捷的信息获取和沟通方式。在这样的时代背景下，我就职的国内最大的社交媒体平台之一的公司，于2019年9月做出了一项引人瞩目的决策：建设一个全新的移动设备指纹分析处理平台项目。该项目旨在给集团提供全面的移动设备指纹分析、存储和唯一标识移动设备的能力，为公司的多元化的业务体系提供坚实的底层支持。移动设备的广泛应用和迅速增长的用户基础使得此类系统的需求变得尤为迫切，在这样的挑战之下，我们面临着如何处理日活约2.6亿的移动设备指纹的读写、以及峰值QPS达7万的高并发场景下保持系统的高可用性。移动设备指纹指的是标识移动设备本身的信息，如CPU型号、系统版本、手机品牌等信息。

&emsp;&emsp;作为这一重要项目的核心，笔者有幸被委以重任，担任本次系统开发的架构师。我的职责包括系统整体的架构设计，以及对项目中的技术活动进行指导和协调。在经过深入的调研和分析之后，发现目标系统需要处理海量的读写需求，同时还要在高峰时段保持高达7万的每秒查询数(QPS)的高并发场景下保持卓越的可用性。我们意识到，即使基于读写分离、分库分表的关系型数据库集群在面对如此巨大的数据量和流量的压力时，也会显得力不从心。面对这一挑战，我们决定采用一种融合了关系数据库与非关系数据库特征的解决方案，从而在存储与性能层面找到了平衡。

&emsp;&emsp;本文将深入探讨这一技术方案的实际应用。特别是，将重点介绍常见的NoSql技术及其适用场景，探讨如何在该项目中合理应用和部署非关系数据库。

&emsp;&emsp;键值对数据库的基本单位是一对键值，其中键是数据的唯一标识符，值则是与键相关联的数据，值可以是字符串、数字、列表、集合等类型，这样简单、多样的非结构化数据，使得其拥有非常强大的灵活性，适用于分布式ID、计数器、热门榜单、高速缓存等实时数据处理场景。键值对数据库通常对数据的读写进行了优化，所以适合用于一些高并发场景；此外相比于关系型数据库，键值对数据库通常更方便做分布式架构，从而提高系统的性能、可伸缩性、可用性以及容灾能力等。Redis是键值对数据库的代表，以其每秒11万次读、8万次写的高并发和易于横向扩展的集群而著名。其底层采用单线程的事件驱动的非阻塞I/O模型，使其拥有了卓越的性能。

&emsp;&emsp;文档数据库可认为是键值对数据库的一个升级，升级之处在于存储的值是以Json、Bson为代表的半结构化数据；相比于键值对数据库，文档数据库拥有更为复杂的数据查询能力。通常用于存储半结构化、变化频繁或不规则的数据，适用场景通常是：日志、社交媒体数据等。其代表产品是MongoDB。

&emsp;&emsp;与关系数据库不同的是，列式数据库的存储方式是按列存储。列式数据库中同一列的相似数据使得压缩率更高，适用于海量数据的场景；在查询分析时通常涉及到对列的聚合、统计、分析操作，所以列式数据库在这样的场景下更是游刃有余。其代表产品是HBase。

&emsp;&emsp;图数据库的基本存储单位是以节点和边组成的图模型数据，节点和边的动态增减使得图数据库拥有非常强大的灵活性，图的遍历带来了强大的查询分析能力，合适用于社交网络数据，推荐系统和知识图谱等场景。其代表产品是Neo4j。

&emsp;&emsp;时间序列数据库通常以时间为索引，所以能高效地进行聚合查询，如计算平均值、求和、最大最小值以及斜率等；非常适用于监控和报警的场景，其代表产品有InfluxDB。

&emsp;&emsp;关系型数据库通常由直观的二维表模型组成，拥有复杂的数据关联查询的能力，同时也有完备的数学理论支撑；但在高并发、数据灵活性以及数据嵌套等方面支持较差。非关系型数据库支持丰富的数据结构，支持复杂的数据嵌套，支持海量数据的高并发场景，极易扩展集群；但缺乏统一的数学理论支撑，数据一致性支持较差。我权衡了关系型数据库和非关系型数据库各自的优缺点，根据项目的实际情况，选择了关系型数据库mysql存储业务上的结构化数据，选择非关系型数据库Redis、HBase、InfluxDB存储非结构化或者半结构化数据；将二者搭配起来共同作为本系统的数据服务支持。

&emsp;&emsp;我们按照本项目服务的各职能部门的角度进行分类，将系统抽象成与各个职能部门对应的子系统，例如商业化广告子系统、数据仓库子系统、监控报警子系统。

&emsp;&emsp;Redis在商业化广告子系统中发挥着重要的作用。该系统面临的主要问题是峰值QPS达到7万以及每日约2.6亿的海量数据；对此，我们采用了读写分离和主从同步的分布式集群架构，为了应对业务的复杂性，我们为该系统设计了19个Redis实例，其中最大的实例是用于存储"用户与设备关系"的，该实例包含了64个端口，并且每个端口都使用了长链接的连接池保持服务的稳定性。为了优化系统性能，我们对每个Redis实例中的数据都设置了合理的过期时间，这样可以确保热数据一直保存在缓存中，而冷数据则会被自动删除；对每个实例中的数据都设置了合理的过期时间，保证了热数据均在缓存中，冷数据被自动删除。此外我们还利用Redis自增key的特性，对系统中各个重要功能做了接口调用的频次限制，以确保接口调用的合理性；例如：在1小时内，一个IP下的同一个移动设备调用该接口不能超过1800次等。我们还将Mysql和Redis对数据的"增删改查"操作封装成了一个独立的联邦数据库。在保证数据一致性的同时，为外部提供了统一且高效的数据查询接口。总之，通过以上优化措施，我们成功地解决了商业化广告子系统中的痛点问题，提高了系统的性能和稳定性。

&emsp;&emsp;HBase主要用于数据仓库子系统中。在个保法及用户允许的情况下，我们采集了移动设备本身的273项指纹信息，包括系统型号、CPU型号、手机品牌、国际移动设备识别码IMEI等信息。

&emsp;&emsp;InfluxDB主要用于监控报警子系统中。

#### 第四段：总结与展望

&emsp;&emsp;
