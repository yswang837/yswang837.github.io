## 课程内容提要

- 1.计算机结构&emsp;&emsp;&emsp;&emsp;✅
- 2.存储系统&emsp;&emsp;&emsp;&emsp;&emsp;✅✅✅✅
- 3.数据传输控制方式&emsp;✅
- 4.总线&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;✅✅
- 5.CISC与RISC  &emsp;  &emsp;&emsp;✅✅
- 6.流水线&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;✅✅
- 7.校验码&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;✅
- 8.嵌入式&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;✅

## 1 计算机结构
&emsp;&emsp;计算机的硬件包含5大组成：**控制器**、**运算器**、**存储器**、**输入设备**和**输出设备**。这也是著名的**冯诺依曼**结构，CPU依据指令周期的不同阶段来区分二进制的指令和数据，因为在指令周期的不同阶段指令会命令CPU分别去取指令或者数据。它们之间的交互如下图：
[![p9DeARs.md.png](https://s1.ax1x.com/2023/05/10/p9DeARs.md.png)](https://imgse.com/i/p9DeARs)\
&emsp;&emsp;别的部件会在后面的章节详细讲解，这里是说运算器和控制器。
### 1.1 运算器

&emsp;&emsp;算术逻辑单元ALU：实现对数据的算术和逻辑运算。\
&emsp;&emsp;累加寄存器AC：运算结果或源操作数的存放区。\
&emsp;&emsp;数据缓冲寄存器DR：暂时存放内存的指令或数据。\
&emsp;&emsp;状态条件寄存器PSW：保存指令运行结果的条件码内容，如溢出标志等。
### 1.2 控制器

&emsp;&emsp;**程序计数器PC**：存储下一条要执行指令的地址。\
&emsp;&emsp;指令寄存器IR：存储即将执行的指令。\
&emsp;&emsp;指令译码器ID：对指令中的操作码字段进行分析解释。\
&emsp;&emsp;时序部件：提供时序控制信号。
>例题
[![p9DnRPg.md.png](https://s1.ax1x.com/2023/05/10/p9DnRPg.md.png)](https://imgse.com/i/p9DnRPg)\
答案：A
## 2 存储系统
&emsp;&emsp;整体采用分层的思想，主要是解决速度、容量和成本之间的矛盾。如下图：\
[![p9DutLq.md.png](https://s1.ax1x.com/2023/05/10/p9DutLq.md.png)](https://imgse.com/i/p9DutLq)\
### 2.1 高速缓存Cache
&emsp;&emsp;高速缓存Cache用来存储当前最活跃的程序和数据，直接与CPU交互，位于CPU和主存之间,容量小，速度为内存的5-10倍，其内容是主存(内存)的拷贝，对于程序员来说是透明的。Cache由控制部分和存储器组成，存储器存储数据，控制部分判断CPU要访问的数据是否在Cache中，在则命中不在则依据一定的算法从主存中替换。\
地址映射：在CPU工作时，送出的是主存单元的地址，而应从Cache存储器中读/写信息。这就需要将主存地址转换为Cache存储器地址，这种地址的转换称为地址映像，由硬件自动完成映射。\
Cache的功能：\
&emsp;&emsp;1.提高CPU数据输入输出的速率，突破冯·诺依曼瓶颈，即突破CPU与存储系统间数据传送带宽限制。\
&emsp;&emsp;2.在计算机的存储系统体系中(除cpu中的寄存器外)，Cache是访问速度最快的层次。\
&emsp;&emsp;3.Cache对程序员来说是透明的。\
&emsp;&emsp;4.使用Cache改善系统性能的依据是程序的局部性原理(总的来说，在CPU运行时，所访问的数据会趋向于一个较小的局部时空内。包括下面两个方面:
**时间局部性**原理:如果一个数据项正在被访问，那么在近期它很可能会被再次访问，即在相邻的时间里会访问同一个数据项。**空间局部性**原理:在最近的将来会用到的数据的地址和现在正在访问的数据地址很可能是相近的，即相邻的空间地址会被连续访问。)\
Cache的命中率：\
&emsp;&emsp;当CPU所访问的数据在Cache中时，命中，直接丛Cache中读取数据，设读取一次Cache时间为1ns，若CPU访问的数据不在Cache中，则需要从内存中读取，设读取一次内存的时间为1000ns，若在CPU多次读取数据过程中，有90%命中Cache，则CPU读取一次的平均时间为(90% * 1 + 10% * 1000)ns\
>例题
[![p9D4n8x.md.png](https://s1.ax1x.com/2023/05/10/p9D4n8x.md.png)](https://imgse.com/i/p9D4n8x)\
答案：B
[![p9D4JIA.md.png](https://s1.ax1x.com/2023/05/10/p9D4JIA.md.png)](https://imgse.com/i/p9D4JIA)\
答案：D
### 2.2 主存(内存)编址计算
&emsp;&emsp;主存如图所示，可以看图试着回答红色框线里面的问题，看完应该知道32位机器和64位机器大概是啥意思了。
[![p9D5gTH.md.png](https://s1.ax1x.com/2023/05/10/p9D5gTH.md.png)](https://imgse.com/i/p9D5gTH)\
**特别提醒**：不要硬算，要化简为2的幂指数来算。
**存储单元个数**=最大地址-最小地址+1
- 编址方式
  - 按字编址：一个存储单元存储的是一个字，最小寻址单位是一个字。
  - 按字节编址：一个存储单元存储的是一个字节，最小寻址单位是一个字节。

**总容量**=存储单元个数*单个存储单元所占大小\
**单位换算**：1GB=1024MB，1MB=1024KB，1KB=1024Byte，1Byte=8bit。
>例题
[![p9h0daQ.md.png](https://s1.ax1x.com/2023/05/19/p9h0daQ.md.png)](https://imgse.com/i/p9h0daQ)\
学霸做对了没
### 2.3 磁盘管理
&emsp;&emsp;磁盘有正反两个盘面，每个盘面有多个同心圆，每个同心圆是一个磁道，每个同心圆又被划分为多个扇区，数据就被存放在一个个扇区中。\
[![p9hrBPH.png](https://s1.ax1x.com/2023/05/19/p9hrBPH.png)](https://imgse.com/i/p9hrBPH)\
&emsp;&emsp;磁头首先要寻找到对应的磁道，然后等待磁盘进行周期旋转，旋转到指定的扇区，才能读取到对应的数据，因此，会产生寻道时间和等待时间。其**公式**为：
存取时间=寻道时间+等待时间(平均定位时间+转动延迟)
- 磁盘调度算法
  - 先来先服务FCFS:根据进程请求访问磁盘的先后顺序进行调度。
  - 最短寻道时间优先SSTF:请求访问的磁道与当前磁道最进的进程优先调度，使得每次的寻道时间最短。会产生“饥饿”现象，即远处进程可能永远无法访问。
  - 扫描算法SCAN:又称“电梯算法”，磁头在磁盘上双向移动，其会选择离磁头当前所在磁道最近的请求访问的磁道，并且与磁头移动方向一致，磁头永远都是从里向外或者从外向里一直移动完才掉头。
  - 单向扫描调度算法CSCAN: 与电梯算法类似，与SCAN不同的是，其只做单向移动，即只能从里向外或者从外向里。
>例题
[![p9hsNSs.md.png](https://s1.ax1x.com/2023/05/19/p9hsNSs.md.png)](https://imgse.com/i/p9hsNSs)\
学霸做对了没
[![p9hsWOx.md.png](https://s1.ax1x.com/2023/05/19/p9hsWOx.md.png)](https://imgse.com/i/p9hsWOx)\
学霸做对了没
## 3 数据传输控制方式
### 3.1 程序查询方式
**程序控制(查询)方式**:CPU主动查询外设是否完成数据传输，效率极低。
### 3.2 程序中断方式
**程序中断方式**: 外设完成数据传输后，向CPU发送中断，等待CPU处理数据，效率相对较高，中断响应时间指的是从发出中断请求到开始进入中断处理程序;中断处理时间指的是从中断处理开始到中断处理结束。中断向量提供中断服务程序的入口地址。多级中断嵌套，使用堆栈来保护断点和现场。
### 3.3 DMA方式
**DMA方式(直接主存存取)**:CPU只需完成必要的初始化等操作，数据传输的整个过程都申。
DMA控制器来完成，在主存和外设之间建立直接的数据通路，效率很高。
>例题
[![p9hyPpj.md.png](https://s1.ax1x.com/2023/05/19/p9hyPpj.md.png)](https://imgse.com/i/p9hyPpj)\
学霸做对了没
[![p9hyFcn.md.png](https://s1.ax1x.com/2023/05/19/p9hyFcn.md.png)](https://imgse.com/i/p9hyFcn)\
学霸做对了没
### 4 总线

### 5 CISC与RISC

### 6 流水线

### 7 校验码

### 8 嵌入式